(this["webpackJsonpreact-books"]=this["webpackJsonpreact-books"]||[]).push([[0],{309:function(e,t,r){},310:function(e,t,r){},311:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"setFilter",(function(){return x})),r.d(n,"setSearchQuery",(function(){return y}));var c={};r.r(c),r.d(c,"addToCart",(function(){return E})),r.d(c,"removeFromCart",(function(){return T}));var a={};r.r(a),r.d(a,"setBooks",(function(){return V}));var i=r(0),o=r.n(i),s=r(32),u=r.n(s),j=r(10),d=r(26),l=r(154),b=r(155),O=r(165),h=r(162),f=r(156),p=r.n(f),m=r(20),x=function(e){return{type:"SET_FILTER",payload:e}},y=function(e){return{type:"SET_QUERY",payload:e}},v=r(332),C=r(329),g=r(5),_=void 0,k=function(e){var t=e.setFilter,r=e.filterBy,n=e.searchQuery,c=e.setSearchQuery;return Object(g.jsxs)(v.a,{secondary:!0,children:[Object(g.jsx)(v.a.Item,{active:"all"===r,onClick:t.bind(_,"all"),children:"\u0412\u0441\u0435"}),Object(g.jsx)(v.a.Item,{active:"price_high"===r,onClick:t.bind(_,"price_high"),children:"\u0426\u0435\u043d\u0430(\u0414\u043e\u0440\u043e\u0433\u0438\u0435)"}),Object(g.jsx)(v.a.Item,{active:"price_low"===r,onClick:t.bind(_,"price_low"),children:"\u0426\u0435\u043d\u0430(\u0414\u0435\u0448\u0435\u0432\u044b\u0435)"}),Object(g.jsx)(v.a.Item,{active:"author"===r,onClick:t.bind(_,"author"),children:"\u0410\u0432\u0442\u043e\u0440"}),Object(g.jsx)(v.a.Item,{children:Object(g.jsx)(C.a,{onChange:function(e){return c(e.target.value)},value:n,icon:"search",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441..."})})]})},R=Object(d.b)((function(e){e.books;return{filterBy:e.filter.filterBy}}),(function(e){return Object(j.a)({},Object(m.b)(n,e))}))(k),E=function(e){return{type:"ADD_TO_CART",payload:e}},T=function(e){return{type:"REMOVE_FROM_CART",payload:e}},w=r(333),S=r(312),I=r(164),B=r(331),A=function(e){var t=e.title,r=e.id,n=e.image,c=e.removeFromCart;return Object(g.jsx)(w.a,{selection:!0,divided:!0,verticalAlign:"middle",children:Object(g.jsxs)(w.a.Item,{children:[Object(g.jsx)(w.a.Content,{floated:"right",children:Object(g.jsx)(S.a,{onClick:c.bind(undefined,r),color:"red",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})}),Object(g.jsx)(I.a,{avatar:!0,src:n}),Object(g.jsx)(w.a.Content,{children:t})]})})},F=function(e){var t=e.totalPrice,r=e.count,n=e.items;return Object(g.jsxs)(v.a,{children:[Object(g.jsx)(v.a.Item,{name:"browse",children:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043a\u043d\u0438\u0433"}),Object(g.jsxs)(v.a.Menu,{position:"right",children:[Object(g.jsxs)(v.a.Item,{name:"signup",children:["\u0418\u0442\u043e\u0433\u043e: \xa0 ",Object(g.jsx)("b",{children:t}),"\xa0 \u0440\u0443\u0431."]}),Object(g.jsx)(B.a,{trigger:Object(g.jsxs)(v.a.Item,{name:"help",children:["\u041a\u043e\u0440\u0437\u0438\u043d\u0430 ( ",Object(g.jsx)("b",{children:r})," )"]}),content:n.map((function(e){return Object(g.jsx)(A,Object(j.a)({},e))})),on:"click",hideOnScroll:!0})]})]})},M=r(160),Q=r.n(M),L=Object(d.b)((function(e){var t=e.cart;return{totalPrice:t.items.reduce((function(e,t){return e+t.price}),0),count:t.items.length,items:Q()(t.items,(function(e){return e.id}))}}),(function(e){return Object(j.a)({},Object(m.b)(c,e))}))(F),D=r(334),P=r(35);var Y=function(e){var t=e.title,r=e.author,n=e.price,c=e.image,a=e.addToCart,i=e.addedCount;return Object(g.jsxs)(D.a,{children:[Object(g.jsx)(I.a,{src:c}),Object(g.jsxs)(D.a.Content,{children:[Object(g.jsx)(D.a.Header,{children:t}),Object(g.jsx)(D.a.Meta,{children:Object(g.jsx)("span",{className:"date",children:r})})]}),Object(g.jsx)(D.a.Content,{extra:!0,children:Object(g.jsxs)("a",{children:[Object(g.jsx)(P.a,{name:"rub"}),n]})}),Object(g.jsxs)(S.a,{onClick:a.bind(this,e),children:["\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443 ",i>0&&"(".concat(i,")")]})]})},J=Object(d.b)((function(e,t){var r=e.cart,n=t.id;return{addedCount:r.items.reduce((function(e,t){return e+(t.id===n?1:0)}),0)}}),(function(e){return Object(j.a)({},Object(m.b)(c,e))}))(Y),K=r(330),U=function(e){Object(O.a)(r,e);var t=Object(h.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(b.a)(r,[{key:"componentWillMount",value:function(){var e=this.props.setBooks;p.a.get("/books.json").then((function(t){var r=t.data;e(r)}))}},{key:"render",value:function(){var e=this.props,t=e.books,r=e.isReady;return Object(g.jsxs)(K.a,{children:[Object(g.jsx)(L,{}),Object(g.jsx)(R,{}),Object(g.jsx)(D.a.Group,{itemsPerRow:4,children:r?t.map((function(e,t){return Object(g.jsx)(J,Object(j.a)({},e),t)})):"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430.."})]})}}]),r}(o.a.Component),V=function(e){return{type:"SET_BOOKS",payload:e}},G=r(104),H=r.n(G),N=function(e,t,r){return function(e,t){switch(t){case"price_high":return H()(e,"price","desc");case"price_low":return H()(e,"price","asc");case"author":return H()(e,"author","asc");default:return e}}(function(e,t){return e.filter((function(e){return e.title.toLowerCase().indexOf(t.toLowerCase())>=0||e.author.toLowerCase().indexOf(t.toLowerCase())>=0}))}(e,r),t)},W=Object(d.b)((function(e){var t=e.books,r=e.filter;return{books:t.items&&N(t.items,r.filterBy,r.searchQuery),isReady:t.isReady}}),(function(e){return Object(j.a)({},Object(m.b)(a,e))}))(U),q=r(161),z=r.n(q),X={isReady:!1,items:null},Z=r(163),$={items:[]},ee={searchQuery:"",filterBy:"all"},te=Object(m.c)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOOKS":return Object(j.a)(Object(j.a)({},e),{},{items:t.payload,isReady:!0});case"SET_IS_READY":return Object(j.a)(Object(j.a)({},e),{},{isReady:t.payload});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":return Object(j.a)(Object(j.a)({},e),{},{items:[].concat(Object(Z.a)(e.items),[t.payload])});case"REMOVE_FROM_CART":return Object(j.a)(Object(j.a)({},e),{},{items:e.items.filter((function(e){return e.id!==t.payload}))});default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER":return Object(j.a)(Object(j.a)({},e),{},{filterBy:t.payload});case"SET_QUERY":return Object(j.a)(Object(j.a)({},e),{},{searchQuery:t.payload});default:return e}}}),re=(r(308),r(309),r(310),Object(m.d)(te,Object(m.a)(z.a)));u.a.render(Object(g.jsx)(o.a.StrictMode,{children:Object(g.jsx)(d.a,{store:re,children:Object(g.jsx)(W,{})})}),document.getElementById("root"))}},[[311,1,2]]]);
//# sourceMappingURL=main.1654580a.chunk.js.map